<!doctype html>
<html lang="en">

<head>
	<!-- Required meta tags -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<link rel="icon" href="img/favicon.PNG" type="image/png">
	<title>Figeur - Find the freshest memes. Theft them.</title>
	<meta name="keywords" content="memes, dank, dankest memes, freshest memes, savage memes, obscure memes, savage, memelord"/>
	<meta name="description" content="The easiest way to discover your style of meme."/>
	<!-- Bootstrap CSS -->
	<link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="css/ionicons.min.css">
	<!-- main css -->
		<link rel="stylesheet" href="css/style.css" type="text/css">
		<script src="https://kit.fontawesome.com/6e969de0c7.js" crossorigin="anonymous"></script>
		<link rel="stylesheet" type="text/css" href="font/flaticon.css">
	<!-- <style type="text/css">
	
<!--===============================================================================================-->	
	<link rel="icon" type="image/png" href="images/icons/favicon.ico"/>
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/bootstrap/css/bootstrap.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="fonts/font-awesome-4.7.0/css/font-awesome.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="fonts/Linearicons-Free-v1.0.0/icon-font.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/animate/animate.css">
<!--===============================================================================================-->	
	<link rel="stylesheet" type="text/css" href="vendor/css-hamburgers/hamburgers.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/animsition/css/animsition.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/select2/select2.min.css">
<!--===============================================================================================-->	
	<link rel="stylesheet" type="text/css" href="vendor/daterangepicker/daterangepicker.css">
	<link rel="stylesheet" type="text/css" href="css/util.css">
		<link rel="stylesheet" type="text/css" href="css/main.css">

	</style>
	<script type="text/javascript" src="js/lib/jquery.min.js"></script>
	<script type="text/javascript" src="js/examples.js"></script>
	
	<script type="text/javascript" src="scrollmagic/uncompressed/ScrollMagic.js"></script>
</head>

<body style="background-color: #e0e0e0">


	<!-- ================ Side Menu Area =================-->
	<div class="side_menu">
		<ul class="list menu_right">
			{{#if user}}
			<img src={{user.profile.picture}} vertical-align="left" width="50px" height="50px" border-radius="50%">
			<li>
				<a href="/logout" style="font-family:Montserrat-Medium;">Logout</a>
			</li>			
			{{/if}}
{{#unless user}}
			<li>
				<a id="reglogin" onclick="$('.hover_bkgr_fricc2').show()"style="font-family:Montserrat-Medium;">Login</a>
			</li>
{{/unless}}

		</ul>
	</div>


	<!--================ Side Menu Icon =================-->
	<div class="canvus_menu">
		<div class="container">
			<div class="float-right">
				<div class="toggle_icon" title="Menu">
					<span></span>
				</div>
			</div>
			<div class="float-left">
				<div class="toggle_icon_figeur" title="Home">
					<span></span>
				</div>
			</div>
		</div>
	</div>


	<!--================ Logged-in Upload Icon =================-->
				{{#if user}}
<div class="footer">
		<div class="upload-btn-wrapper" title="Upload a Meme">
			<form ref='uploadForm' 
      		id='uploadForm' 
      		action='/upload' 
      		method='post' 
      		encType="multipart/form-data">
  			<button class="btn4" ><i class="flaticon-upload"></i></button>
  				<input type="file" onchange="this.form.submit()" name="files" multiple="multiple"/>
			</form>
		</div>
</div>
			{{/if}}


	<!--================ Unauthenticated Upload Icon =================-->
{{#unless user}}	
<div class="footer">
		<div class="upload-btn-wrapper" title="Upload a Meme">
			<form ref='uploadForm' 
      		id='uploadForm' 
      		action='/upload' 
      		method='post' 
      		encType="multipart/form-data">
  			<button class="btn4" ><i class="flaticon-upload"></i></button>
  				<input type="file" onchange="$('.hover_bkgr_fricc').show()" name="files" multiple="multiple"/>
			</form>
		</div>
</div>
{{/unless}}		

	<!--================ Page Top Area =================-->
	<div class="hero-wrap js-fullheight" style="background-image: url('images/cryfry.jpg');">
		<div class="overlay"></div>
		<div class="container">
		  <div class="row no-gutters slider-text js-fullheight align-items-center justify-content-center" data-scrollax-parent="true">
			<div class="col-md-10 text-center ftco-animate" data-scrollax=" properties: { translateY: '70%' }">
				<h1 class="mb-0" style="font-family:Montserrat-Medium;">Meme Foundry.</h1>
				
				<div class="s129">
				</div>
			  	<div class="mouse">
							  <a href="#" class="mouse-icon">
								  <div class="mouse-wheel"><span class="ion-ios-arrow-down"></span></div>
							  </a>
				</div>
			</div>
		  </div>
		</div>
	  </div>


	<!--================ Regular Log-in =================-->
	<div class="hover_bkgr_fricc2">
	    <span class="helper"></span>
	    <div class="wrap-login100 p-l-110 p-r-110 p-t-62 p-b-33">

				<form class="login100-form validate-form flex-sb flex-w">
					<span class="login100-form-title p-b-33">
						Log in with
					</span>			

					<a href="/auth/facebook" class="btn-face m-b-20">
						<img src="images/icons/icon-face.png">
							Facebook
					</a>

					<a href="/auth/google" class="btn-google m-b-20">
						<img src="images/icons/icon-google.png" alt="GOOGLE">
						Google
					</a>
				</form>
		</div>
	</div>	  

	<!--================ Upload Log-in =================-->
	<div class="hover_bkgr_fricc">
	    <span class="helper"></span>
	    <div class="wrap-login100 p-l-110 p-r-110 p-t-62 p-b-33">

				<form class="login100-form validate-form flex-sb flex-w">
					<span class="login100-form-title p-b-33">
						Get credit for your posts
						<br>
						<p>Continue with</p>
					</span>			

					<a href="/auth/facebook" class="btn-face m-b-20">
						<img src="images/icons/icon-face.png">
							Facebook
					</a>

					<a href="/auth/google" class="btn-google m-b-20">
						<img src="images/icons/icon-google.png" alt="GOOGLE">
						Google
					</a>
				</form>
					<div class="container-login100-form-btn m-t-17">
						<button class="login100-form-btn">
							No thanks, continue anonymously
						</button>
					</div>
		</div>
	</div>

	<!--================ Content ===============
<div id="content">
	{{#each items}}
	  	<div style="background-color: #e0e0e0; " class="wrapper style2">
			<article id="main" class="imgcontainer special">
				<div class="img4" style="content:url({{this.user.profile.picture}});"></div>
				<a href="#" class="image featured"><img src="{{this.link}}" alt="" /></a>
				<form action="/nsfw" method="post" target="hiddenFrame">
    				<button name="id" value="{{_id}}" style="position: relative; float: left" class="btn btn-success">This is so offensive!</button>
				</form>				
				<form action="/moar" method="post" target="hiddenFrame">
					<button name="id" value="{{_id}}" style="position: relative; float: right" class="btn btn-success">More like this in my feed</button>
				</form>

			</article>
		</div>
	{{/each}}
</div>==-->

<!--================ Feed =================-->
<div id="content"></div>


<script>
//Counter for any query stream
var n = 0;

//Default tags to search for
var tags = null;

//When page loads, run Increment function
$( document ).ready(addBoxes);

//Detect when page near bottom
$(window).scroll(function() {
   if($(window).scrollTop() + $(window).height() > $(document).height() - 300) {
	   //Call increment function
		inc();
   }
});

//Runs on click of a "Moar" button
/*$(".btnmoar").on('click', function(event){
    //event.stopPropagation();
    //event.stopImmediatePropagation();
    //(... rest of your JS code)
	//var id_model = $('.btnmoar').val();
    //alert(id_model);
	//alert('1 wks');
});*/


$(document).on('click', '.btnmoar', function () {
    // your function here
	var soughttags = $('.btnmoar').val();
	tags = soughttags;
	n = 0;
	inc();
    //alert(id_model);
});


//Increments meme page
function inc() {
     //Call add function
	 addBoxes(1);
	 n++;
 };

//Grabs session ID from page
var sessionnum = "{{session}}";

//Calls for more data
function addBoxes (amount) {
var skipspot = n * 10;

              if (tags == null) {
                // do something 
                var data = {"limit": 10, "skip": skipspot, "sessionid": sessionnum};	
              }else{
                var data = {"limit": 10, "skip": skipspot, "sessionid": sessionnum, "tags": tags};	
              };

//var data = {"limit": 10, "skip": skipspot, "sessionid": sessionnum, "tags": tags};	
jQuery.ajax({
    type: 'POST',
	url: '/memeshot',
    dataType: 'json', // ** ensure you add this line **
  data: data,
    success: function(data) {
		$.each(data,function ( i, item ) {
    $('#content').append("<div style='background-color: #e0e0e0;' class='wrapper style2'>"+
		"<article class='imgcontainer special'><div class=img4'></div><a href='#' class='image featured'><img src=" + data[i].link + " /></a>"+
		"<div><h4>" + data[i].tags + "</h4></div>"+
		//"<div><h4>"{{this._id}}"</h4></div>"+
		"<button value=" + data[i]._id + " style='position: relative; margin: 10px' class='btndelete'>DELETE</button>"+

		"<button value=" + data[i]._id + " data-val='1' style='position: relative; margin: 10px' class='btnqual'>1</button>"+
		"<button value=" + data[i]._id + " data-val='2' style='position: relative; margin: 10px' class='btnqual'>2</button>"+
		"<button value=" + data[i]._id + " data-val='3' style='position: relative; margin: 10px' class='btnqual'>3</button>"+
		"<button value=" + data[i]._id + " data-val='4' style='position: relative; margin: 10px' class='btnqual'>4</button>"+
		"<button value=" + data[i]._id + " data-val='5' style='position: relative; margin: 10px' class='btnqual'>5</button>"+
		"<button value=" + data[i]._id + " data-val='6' style='position: relative; margin: 10px' class='btnqual'>6</button>"+
		"<button value=" + data[i]._id + " data-val='7' style='position: relative; margin: 10px' class='btnqual'>7</button>"+
		"<button value=" + data[i]._id + " data-val='8' style='position: relative; margin: 10px' class='btnqual'>8</button>"+
		"<button value=" + data[i]._id + " data-val='9' style='position: relative; margin: 10px' class='btnqual'>9</button>"+

		"<button value='" + data[i]._id + "' data-val='best' style='position: relative; margin: 7px' class='btntag'>best</button>"+
		"<button value=" + data[i]._id + " data-val='relationship' style='position: relative; margin: 7px' class='btntag'>relationship</button>"+
		"<button value=" + data[i]._id + " data-val='parenting' style='position: relative; margin: 7px' class='btntag'>parenting</button>"+
		"<button value=" + data[i]._id + " data-val='school' style='position: relative; margin: 7px' class='btntag'>school</button>"+
		"<button value=" + data[i]._id + " data-val='sex' style='position: relative; margin: 7px' class='btntag'>sex</button>"+
		"<button value=" + data[i]._id + " data-val='awkward' style='position: relative; margin: 7px' class='btntag'>awkward</button>"+
		"<button value=" + data[i]._id + " data-val='vague' style='position: relative; margin: 7px' class='btntag'>vague</button>"+
		"<button value=" + data[i]._id + " data-val='absurd' style='position: relative; margin: 7px' class='btntag'>absurd</button>"+
		"<button value=" + data[i]._id + " data-val='men' style='position: relative; margin: 7px' class='btntag'>men</button>"+
		"<button value=" + data[i]._id + " data-val='women' style='position: relative; margin: 7px' class='btntag'>women</button>"+
		"<button value=" + data[i]._id + " data-val='hotboi' style='position: relative; margin: 7px' class='btntag'>hotboi</button>"+
		"<button value=" + data[i]._id + " data-val='hotgurl' style='position: relative; margin: 7px' class='btntag'>hotgurl</button>"+
		"<button value=" + data[i]._id + " data-val='history' style='position: relative; margin: 7px' class='btntag'>history</button>"+
		"<button value=" + data[i]._id + " data-val='christian' style='position: relative; margin: 7px' class='btntag'>christian</button>"+
		"<button value=" + data[i]._id + " data-val='michigan' style='position: relative; margin: 7px' class='btntag'>michigan</button>"+
		"<button value=" + data[i]._id + " data-val='homeshool' style='position: relative; margin: 7px' class='btntag'>homeschool</button>"+
		"<button value=" + data[i]._id + " data-val='bitchy' style='position: relative; margin: 7px' class='btntag'>bitchy</button>"+
		"<button value=" + data[i]._id + " data-val='dramatic' style='position: relative; margin: 7px' class='btntag'>dramatic</button>"+
		"<button value=" + data[i]._id + " data-val='dating' style='position: relative; margin: 7px' class='btntag'>dating</button>"+
		"<button value=" + data[i]._id + " data-val='politics' style='position: relative; margin: 7px' class='btntag'>politics</button>"+
		"<button value=" + data[i]._id + " data-val='porn' style='position: relative; margin: 7px' class='btntag'>porn</button>"+
		"<button value=" + data[i]._id + " data-val='friends' style='position: relative; margin: 7px' class='btntag'>friends</button>"+
		"<button value=" + data[i]._id + " data-val='fail' style='position: relative; margin: 7px' class='btntag'>fail</button>"+
		"<button value=" + data[i]._id + " data-val='usgirls' style='position: relative; margin: 7px' class='btntag'>usgirls</button>"+
		"<button value=" + data[i]._id + " data-val='usboys' style='position: relative; margin: 7px' class='btntag'>usboys</button>"+
		"<button value=" + data[i]._id + " data-val='themgirls' style='position: relative; margin: 7px' class='btntag'>themgirls</button>"+
		"<button value=" + data[i]._id + " data-val='themboys' style='position: relative; margin: 7px' class='btntag'>themboys</button>"+
		"<button value=" + data[i]._id + " data-val='work' style='position: relative; margin: 7px' class='btntag'>work</button>"+
		"<button value=" + data[i]._id + " data-val='it' style='position: relative; margin: 7px' class='btntag'>it</button>"+
		"<button value=" + data[i]._id + " data-val='moms' style='position: relative; margin: 7px' class='btntag'>moms</button>"+
		"<button value=" + data[i]._id + " data-val='dads' style='position: relative; margin: 7px' class='btntag'>dads</button>"+
		"<button value=" + data[i]._id + " data-val='exes' style='position: relative; margin: 7px' class='btntag'>exes</button>"+
		"<button value=" + data[i]._id + " data-val='loser' style='position: relative; margin: 7px' class='btntag'>loser</button>"+
		"<button value=" + data[i]._id + " data-val='shy' style='position: relative; margin: 7px' class='btntag'>shy</button>"+
		"<button value=" + data[i]._id + " data-val='creep' style='position: relative; margin: 7px' class='btntag'>creep</button>"+		
		"<button value=" + data[i]._id + " data-val='horror' style='position: relative; margin: 7px' class='btntag'>horror</button>"+				
		"<button value=" + data[i]._id + " data-val='pop' style='position: relative; margin: 7px' class='btntag'>pop</button>"+
		"<button value=" + data[i]._id + " data-val='savage' style='position: relative; margin: 7px' class='btntag'>savage</button>"+
		"<button value=" + data[i]._id + " data-val='dumb' style='position: relative; margin: 7px' class='btntag'>dumb</button>"+
		"<button value=" + data[i]._id + " data-val='hood' style='position: relative; margin: 7px' class='btntag'>hood</button>"+
		"<button value=" + data[i]._id + " data-val='redneck' style='position: relative; margin: 7px' class='btntag'>redneck</button>"+
		"<button value=" + data[i]._id + " data-val='poor' style='position: relative; margin: 7px' class='btntag'>poor</button>"+
		"<button value=" + data[i]._id + " data-val='fake' style='position: relative; margin: 7px' class='btntag'>fake</button>"+

		"</article></div>");
 });
    }
});
};

$(document).on('click', '.btntag', function () {
    // your function here
	var id = $(this).val();
	var tag = $(this).data("val");

	var data = {"id": id, "tag": tag};	
jQuery.ajax({
    type: 'POST',
	url: '/addtag',
    dataType: 'json', // ** ensure you add this line **
  data: data
});
});

$(document).on('click', '.btnqual', function () {
    // your function here
	var id = $(this).val();
	var qual = $(this).data("val");

	var data = {"id": id, "qual": qual};	
jQuery.ajax({
    type: 'POST',
	url: '/memequal',
    dataType: 'json', // ** ensure you add this line **
  data: data
});
});

$(document).on('click', '.btndelete', function () {
    // your function here
	var id = $(this).val();

	var data = {"id": id};	
jQuery.ajax({
    type: 'POST',
	url: '/deletememe',
    dataType: 'json', // ** ensure you add this line **
  data: data
});
});


</script>



<iframe name="hiddenFrame" width="0" height="0" border="0" style="display: none;"></iframe>


<style type="text/css">
.img4{
  width: 50px;
  height: 50px;
  border-radius: 50%;
  margin: 0 auto;
  margin-bottom: 5px;
position: relative;
z-index: 99999;
left: 50%; top: 30px; }

@media (min-width: 2px) {
  .img4 {
    margin-top: -60px; } }

@media (min-width: 492px) {
  .img4 {
    margin-top: -75px; } }  

@media (min-width: 992px) {
  .img4 {
    margin-top: -100px; } } 

  .wrapper.style2 {
    padding-top: 0;
	margin: 0 30px 10em 30px;
  }
.imgcontainer {
  margin: 0 auto 0 auto;
  max-width: 100%;
  border-radius: 20px;
  width: 900px;
}
		.image.featured {
      display: block;
			width: 100%;
			margin: 0
		}
</style>

	<!--================Login Popup Box Only - https://html-online.com/articles/simple-popup-box/=================-->

<style type="text/css">
/* Popup box BEGIN */
.hover_bkgr_fricc{
  background:rgba(0,0,0,.6);
  cursor:pointer;
  display:none;
  height:100%;
  position:fixed;
  text-align:center;
  top:0;
  width:100%;
  z-index:10000;
}.hover_bkgr_fricc > .wrap-login100 {
  background-color: #fff;
  box-shadow: 10px 10px 60px #555;
  display: inline-block;
  height: auto;
  max-width: 751px;
  min-height: 100px;
  vertical-align: middle;
  width: 95%;
  position: relative;
  border-radius: 8px;
  padding: 60px 5%;
}
.hover_bkgr_fricc .helper{
  display:inline-block;
  height:100%;
  vertical-align:middle;
}

.trigger_popup_fricc {
  cursor: pointer;
  font-size: 20px;
  margin: 20px;
  display: inline-block;
  font-weight: bold;
}

.hover_bkgr_fricc2{
  background:rgba(0,0,0,.6);
  cursor:pointer;
  display:none;
  height:100%;
  position:fixed;
  text-align:center;
  top:0;
  width:100%;
  z-index:10000;
}.hover_bkgr_fricc2 > .wrap-login100 {
  background-color: #fff;
  box-shadow: 10px 10px 60px #555;
  display: inline-block;
  height: auto;
  max-width: 751px;
  min-height: 100px;
  vertical-align: middle;
  width: 95%;
  position: relative;
  border-radius: 8px;
  padding: 60px 5%;
}
.hover_bkgr_fricc2 .helper{
  display:inline-block;
  height:100%;
  vertical-align:middle;
}

.trigger_popup_fricc {
  cursor: pointer;
  font-size: 20px;
  margin: 20px;
  display: inline-block;
  font-weight: bold;
}
/* Popup box BEGIN */

</style>
	 <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
 	<!-- Optional JavaScript -->
 <script> 
	//   $(window).load(function () {
	//btn4 is the Upload button when not logged in
    //$(".btn4").click(function(){
    //   $('.hover_bkgr_fricc').show();
    //});
    $('.hover_bkgr_fricc').click(function(){
        $('.hover_bkgr_fricc').hide();
    });
	//login100-form-btn is No Thanks button
    $('.login100-form-btn').click(function(){
		//$('.uploadForm').form.submit()
		document.getElementById("uploadForm").submit();
    });

	    $('.hover_bkgr_fricc2').click(function(){
        $('.hover_bkgr_fricc2').hide();
    });
//});
 </script>


	<!-- Optional JavaScript -->
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.11/handlebars.min.js"></script>

	<script src="https://code.jquery.com/jquery-2.2.0.min.js"></script>
	<script src="js/jquery-3.2.1.min.js"></script>
	<script src="js/theme.js"></script>
	<script src="js/jquery-migrate-3.0.1.min.js"></script>
	<script src="js/jquery.stellar.min.js"></script>
	<script src="js/aos.js"></script>
	<script src="js/main.js"></script>

		<!--================Login Popup Content=================-->

	<script src="vendor/animsition/js/animsition.min.js"></script>
	<script src="vendor/bootstrap/js/popper.js"></script>
	<script src="vendor/bootstrap/js/bootstrap.min.js"></script>
	<script src="vendor/select2/select2.min.js"></script>
	<script src="vendor/daterangepicker/moment.min.js"></script>
	<script src="vendor/daterangepicker/daterangepicker.js"></script>
	<script src="vendor/countdowntime/countdowntime.js"></script>

</body>
</html>